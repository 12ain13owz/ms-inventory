@if (parcels.length <= 0) {
<button mat-flat-button color="warn" class="w-100">
  ไม่พบข้อมูลสำหรับปริ้นคิวอาร์โค้ด
</button>
} @else {
<mat-card>
  <mat-card-content class="mb-16">
    <button
      class="mb-20"
      mat-flat-button
      color="primary"
      [disabled]="isLoading"
      (click)="onClickDownload()"
    >
      Donwload คิวอาร์โค้ด
    </button>

    @if (isLoading) {
    <h3>ประมวลผล {{ this.percentComplete.toFixed(2) }}%</h3>
    }
  </mat-card-content>

  <mat-card-footer>
    @if (isLoading) {
    <mat-progress-bar
      mode="buffer"
      color="accent"
      [value]="percentComplete"
    ></mat-progress-bar>
    }
  </mat-card-footer>
</mat-card>
}

<div class="d-flex flex-wrap gap-10 visibility-hidden">
  @for (parcel of parcels; track $index) {
  <qrcode [qrdata]="parcel.track" [width]="128" #canvasElement></qrcode>
  }
  <a [download]="fileName" #downloadElement></a>
</div>
